
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Primary One Registration Statistics Visualiser</title>
    <meta name="description" content="Visualisation of Singapore Primary Schools and associated registration statistics"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./leaflet/leaflet.css" />
    <link rel="stylesheet" href="./css/extra.css" />
    <script src="./leaflet/leaflet.js"></script>
    <script src="geodata.geojson" type="text/javascript"></script>
  </head>
	<body>
		<section class="page-header">
			<h1 class="project-name">PriOneRegViz</h1>
			<h2 class="project-tagline">Visualisation of Singapore Primary Schools and associated registration statistics</h2>
			<a href="https://github.com/origamiwolf/PriOneRegViz" class="btn">View on GitHub</a>
		</section>

    <section class="main-content">
      <h2 id="primary-one-registration-statistics-visualiser">Primary One Registration Statistics Visualiser</h2>

<p>A Leaflet.js map showing Singapore’s primary schools, and statistics pertaining to the Primary One Registration Exercise.</p>

<p>Schools Geodata obtained from <a href="https://data.gov.sg">Data.gov.sg</a> and <a href="[https://www.onemap.sg]">OneMap</a>.</p>

<p>Schools registration statistics taken from various online sources (<a href="https://www.kiasuparents.com">KiasuParents</a>, <a href="http://www.domainofexperts.com">Domain Of Experts</a>, <a href="https://elite.com.sg">elite.com.sg</a> and individual school websites).</p>


<div id="map" style="height: 600px"></div>
<script>
	var map = L.map('map').setView([1.3603, 103.8084], 12);

	var basemap = L.tileLayer('https://maps-{s}.onemap.sg/v3/Default/{z}/{x}/{y}.png', {
			attribution: 'Map data &copy; contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>',
			maxZoom: 18,
            		minZoom: 11
			});

	attribution = map.attributionControl;
	attribution.setPrefix('<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;"/>');

	map.setMaxBounds([[1.7, 106.0], [1.0, 102.0]]);
	basemap.addTo(map);

	/* add schools	*/

	L.geoJSON(schools, {
		onEachFeature: schoolPopup
	}).addTo(map);

	/* display school information in popup */
	function schoolPopup(feature, layer) {
		var mtM = feature.properties.MT.includes('M') ? 'Malay':'';
		var mtC = feature.properties.MT.includes('C') ? 'Chinese':'';
		var mtT = feature.properties.MT.includes('T') ? 'Tamil':'';
		var Y2016 = feature.properties.Y2016.split(',');
		var Y2015 = feature.properties.Y2015.split(',');
		var Y2014 = feature.properties.Y2014.split(',');
		var p_name = ['Phase 1','Phase 2A1','Phase2A2','','','Phase 2B','','Phase 2C','','Phase 2C(S)'];
		
		function displayOcc(x) {
			var ret = '<td class="occ">';
			if (x >= 100) {
				ret = ret + '<b>' + x + '%</b></td>';
			} else {
				ret = ret + x + '%</td>';
			}
			return ret;
		}

		function displayApp(x) {
			var ret = '<td class="app">';
			if (x > 1.00) {
				ret = ret + '<b>(' + x + ')</b>';
			} else {
				if (x <= 0.01) {
					ret = ret + '-';
				} else {
					ret = ret + '(' + x + ')';
				}
			}
			ret = ret + '</td>';
			return ret;
		}
						
		var sch_data = '<h2>'+feature.properties.School+'</h2>';
		sch_data = sch_data + '<b>Handicap Facilities</b>: ' + feature.properties.HFac + '<br>';
		sch_data = sch_data + '<b>Mother Tongues Offered: </b>' + mtM + ' ' + mtC + ' ' + mtT + '<br><br>';
		sch_data = sch_data + '<table>';
		sch_data = sch_data + '<tr><th></th><th colspan="2">2016</th><th colspan="2">2015</th><th colspan="2">2014</th></tr>';		
		sch_data = sch_data + '<tr><td class="td0">Places</td><td class="occ" colspan=2>'+Y2016[0]+'%</td><td class="occ" colspan=2>'+Y2015[0]+'%</td><td class="occ" colspan=2>'+Y2014[0]+'%</td></tr>';
		
		for (i=1;i<4;i++) {
			sch_data = sch_data + '<tr><td class="td0">' + p_name[i-1] + '</td><td class="occ" colspan=2>'+Y2016[i]+'</td><td class="occ" colspan=2>'+Y2015[i]+'</td><td class="occ" colspan=2>'+Y2014[i]+'</td></tr>';
		}
		
		for (i=5;i<10;i+=2) {
			sch_data = sch_data + '<tr><td class="td0">' + p_name[i] + '</td>' + displayOcc(Y2016[i]) + displayApp(Y2016[i-1]) + displayOcc(Y2015[i]) + displayApp(Y2015[i-1]) + displayOcc(Y2014[i]) + displayApp(Y2014[i-1]);
		}
		
		sch_data = sch_data + '</table>';
		
		layer.bindPopup(sch_data, {maxWidth: '400', className: 'custom-popup'});
	}

</script>
<p><strong>Disclaimer</strong></p>
<p>This visualisation was done as a programming exercise.  If you actually make use of it to plan your Primary One registration strategy for your kid, don’t hold me responsible if your kid doesn’t get into your school of choice.  Registration statistics are provided as-is, and no claims are made as to the accuracy of the data.</p>

      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/origamiwolf/PriOneRegViz">PriOneRegViz</a> is maintained by <a href="https://github.com/origamiwolf">origamiwolf</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>

